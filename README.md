# 执行者选举架构

使用场景：需要一个执行者来执行任务时。例如：多tab页签,多worker线程,多进程等。

## 功能实现列表：

### 通信：

- [x] 请求透过中心调度器调度提供者响应

> 请求被定义为调用者请求功能提供者, a -> scheduler -> b
>
> 响应被定义为调用者请求后调度器转发提供者后再次转发回调用者 b-> scheduler ->a

- [x] 调度器通知
- [x] 调度器广播
- [x] 消息类型和消息体的规范定义

### 选举制度:

> 由理事会"council"来管理选举制度，理事会由调度器"Scheduler"来管理。

- [x] 上位机制
  - [x] 第一人上位
  - [x] 退位后顺位继承
  - [x] 无leader时且无参选人时(选举成功会清空参选人)，由上层调度器指派leader
- [x] 参选机制
  - [x] 调用参选接口参选(上层定义为，可见时和实例化后参选)
- [x] 退位机制
  - [x] leader主动退位(上层定义为，页面关闭)
  - [x] 任期结束(上层定义为，其他页面激活开始任期倒计时，具体查看`council.TermOfOffice`)

### 事件队列：

- [x] 批量激活
- [x] 重载事件队列

## 考虑优化项:

- [x] 批量处理 事件队列统一派发给leader。
- [x] server单一化，而不是每个client都会创建一个server。

## TODO:

- [] tabManager脱离平台改为nodeManager
